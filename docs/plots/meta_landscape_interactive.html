<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Landscape - Beyblade X</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        body.light {
            background-color: #ffffff;
            color: #1a1a1a;
        }
        body.dark {
            background-color: #0f172a;
            color: #f1f5f9;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .theme-toggle label {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            transition: background-color 0.3s;
        }
        body.light .theme-toggle label {
            background-color: #e5e7eb;
        }
        body.dark .theme-toggle label {
            background-color: #334155;
        }
        .theme-toggle input {
            display: none;
        }
        .theme-icon {
            font-size: 1.2em;
        }
        .back-link {
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        body.light .back-link {
            color: #1a1a1a;
            background-color: #e5e7eb;
        }
        body.dark .back-link {
            color: #f1f5f9;
            background-color: #334155;
        }
        .back-link:hover {
            opacity: 0.8;
        }
        #plotDiv {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
        }
        /* Mobile responsive styles */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
                flex-wrap: wrap;
            }
            .header h1 {
                font-size: 1.2em;
                order: -1;
                width: 100%;
                text-align: center;
            }
            .back-link {
                padding: 6px 12px;
                font-size: 0.9em;
            }
            .theme-toggle {
                width: 100%;
                justify-content: center;
            }
            .theme-toggle label {
                padding: 6px 12px;
                font-size: 0.9em;
            }
            #plotDiv {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
        }
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1em;
            }
        }
    </style>
</head>
<body class="light">
    <div class="header">
        <a href="../plots.html" class="back-link">‚Üê Back to Plots</a>
        <h1>üó∫Ô∏è Meta Landscape</h1>
        <div class="theme-toggle">
            <label>
                <input type="checkbox" id="themeToggle">
                <span class="theme-icon" id="themeIcon">üåô</span>
                <span id="themeLabel">Dark Mode</span>
            </label>
        </div>
    </div>
    <div id="plotDiv"></div>

    <script>
        // Data
        const xData = [2.11, 1.87, 1.35, 2.23, 1.75, 1.5, 1.54, 1.32, 1.18, 1.61, 1.36, 1.48, 1.69, 2.3, 1.52, 1.99, 2.55, 1.94, 1.59, 1.44, 1.9, 1.26, 1.88, 1.07, 1.38, 0.79, 1.25, 1.32, 1.35, 0.75, 1.65, 1.55, 0.96, 1.75, 0.5, 1.37];
        const yData = [4.03, 4.12, 4.54, 4.12, 3.92, 3.97, 3.87, 3.89, 3.54, 3.98, 4.18, 3.5, 3.7, 4.0, 4.04, 4.07, 3.57, 4.04, 4.1, 4.04, 3.56, 3.93, 3.66, 3.29, 3.53, 3.25, 3.77, 4.07, 3.28, 4.14, 3.64, 3.93, 3.62, 3.86, 3.64, 2.94];
        const textData = ["FoxBrush", "ImpactDrake", "CerberusFlame", "CobaltDragoon", "WeissTiger", "DranDagger", "ViperTail", "RhinoReaper", "KnightMail", "TuskMammoth", "DranSword", "GolemRock", "HellsChain", "LeonClaw", "ScorpioSpear", "SharkEdge", "DranBuster", "PhoenixWing", "SilverWolf", "PhoenixRudder", "UnicornSting", "PerseusDark", "CrimsonGaruda", "WhaleFlame", "LeonCrest", "WizardRod", "BlackShell", "WizardArc", "TyrannoBeat", "HellsReaper", "WhaleWave", "DranBrave", "WizardArrow", "PegasusBlast", "HellsHammer", "SamuraiSaber"];
        const eloData = [1078, 1067, 1056, 1045, 1044, 1040, 1035, 1033, 1031, 1024, 1016, 1002, 1002, 1001, 999, 995, 995, 994, 993, 992, 990, 988, 986, 983, 982, 981, 980, 979, 965, 965, 963, 962, 961, 957, 954, 943];
        const markerSizes = [40.0, 33.33333333333333, 20.0, 23.333333333333332, 16.666666666666664, 23.333333333333332, 20.0, 26.666666666666668, 16.666666666666664, 30.0, 23.333333333333332, 20.0, 16.666666666666664, 13.333333333333332, 20.0, 16.666666666666664, 16.666666666666664, 20.0, 20.0, 20.0, 23.333333333333332, 16.666666666666664, 13.333333333333332, 10.0, 13.333333333333332, 23.333333333333332, 16.666666666666664, 13.333333333333332, 16.666666666666664, 13.333333333333332, 16.666666666666664, 16.666666666666664, 13.333333333333332, 10.0, 13.333333333333332, 13.333333333333332];
        const hoverText = ["<b>FoxBrush</b><br>Rank: #1<br>ELO: 1078<br>Winrate: 83.3%<br>Matches: 12<br><br>Offense: 2.11<br>Defense: 4.03<br><br><i>Click for Bey profile</i>", "<b>ImpactDrake</b><br>Rank: #2<br>ELO: 1067<br>Winrate: 80.0%<br>Matches: 10<br><br>Offense: 1.87<br>Defense: 4.12<br><br><i>Click for Bey profile</i>", "<b>CerberusFlame</b><br>Rank: #3<br>ELO: 1056<br>Winrate: 83.3%<br>Matches: 6<br><br>Offense: 1.35<br>Defense: 4.54<br><br><i>Click for Bey profile</i>", "<b>CobaltDragoon</b><br>Rank: #4<br>ELO: 1045<br>Winrate: 71.4%<br>Matches: 7<br><br>Offense: 2.23<br>Defense: 4.12<br><br><i>Click for Bey profile</i>", "<b>WeissTiger</b><br>Rank: #5<br>ELO: 1044<br>Winrate: 60.0%<br>Matches: 5<br><br>Offense: 1.75<br>Defense: 3.92<br><br><i>Click for Bey profile</i>", "<b>DranDagger</b><br>Rank: #6<br>ELO: 1040<br>Winrate: 71.4%<br>Matches: 7<br><br>Offense: 1.50<br>Defense: 3.97<br><br><i>Click for Bey profile</i>", "<b>ViperTail</b><br>Rank: #7<br>ELO: 1035<br>Winrate: 66.7%<br>Matches: 6<br><br>Offense: 1.54<br>Defense: 3.87<br><br><i>Click for Bey profile</i>", "<b>RhinoReaper</b><br>Rank: #8<br>ELO: 1033<br>Winrate: 75.0%<br>Matches: 8<br><br>Offense: 1.32<br>Defense: 3.89<br><br><i>Click for Bey profile</i>", "<b>KnightMail</b><br>Rank: #9<br>ELO: 1031<br>Winrate: 60.0%<br>Matches: 5<br><br>Offense: 1.18<br>Defense: 3.54<br><br><i>Click for Bey profile</i>", "<b>TuskMammoth</b><br>Rank: #10<br>ELO: 1024<br>Winrate: 77.8%<br>Matches: 9<br><br>Offense: 1.61<br>Defense: 3.98<br><br><i>Click for Bey profile</i>", "<b>DranSword</b><br>Rank: #11<br>ELO: 1016<br>Winrate: 71.4%<br>Matches: 7<br><br>Offense: 1.36<br>Defense: 4.18<br><br><i>Click for Bey profile</i>", "<b>GolemRock</b><br>Rank: #12<br>ELO: 1002<br>Winrate: 50.0%<br>Matches: 6<br><br>Offense: 1.48<br>Defense: 3.50<br><br><i>Click for Bey profile</i>", "<b>HellsChain</b><br>Rank: #13<br>ELO: 1002<br>Winrate: 40.0%<br>Matches: 5<br><br>Offense: 1.69<br>Defense: 3.70<br><br><i>Click for Bey profile</i>", "<b>LeonClaw</b><br>Rank: #14<br>ELO: 1001<br>Winrate: 50.0%<br>Matches: 4<br><br>Offense: 2.30<br>Defense: 4.00<br><br><i>Click for Bey profile</i>", "<b>ScorpioSpear</b><br>Rank: #15<br>ELO: 999<br>Winrate: 50.0%<br>Matches: 6<br><br>Offense: 1.52<br>Defense: 4.04<br><br><i>Click for Bey profile</i>", "<b>SharkEdge</b><br>Rank: #16<br>ELO: 995<br>Winrate: 40.0%<br>Matches: 5<br><br>Offense: 1.99<br>Defense: 4.07<br><br><i>Click for Bey profile</i>", "<b>DranBuster</b><br>Rank: #17<br>ELO: 995<br>Winrate: 40.0%<br>Matches: 5<br><br>Offense: 2.55<br>Defense: 3.57<br><br><i>Click for Bey profile</i>", "<b>PhoenixWing</b><br>Rank: #18<br>ELO: 994<br>Winrate: 50.0%<br>Matches: 6<br><br>Offense: 1.94<br>Defense: 4.04<br><br><i>Click for Bey profile</i>", "<b>SilverWolf</b><br>Rank: #19<br>ELO: 993<br>Winrate: 50.0%<br>Matches: 6<br><br>Offense: 1.59<br>Defense: 4.10<br><br><i>Click for Bey profile</i>", "<b>PhoenixRudder</b><br>Rank: #20<br>ELO: 992<br>Winrate: 50.0%<br>Matches: 6<br><br>Offense: 1.44<br>Defense: 4.04<br><br><i>Click for Bey profile</i>", "<b>UnicornSting</b><br>Rank: #21<br>ELO: 990<br>Winrate: 42.9%<br>Matches: 7<br><br>Offense: 1.90<br>Defense: 3.56<br><br><i>Click for Bey profile</i>", "<b>PerseusDark</b><br>Rank: #22<br>ELO: 988<br>Winrate: 40.0%<br>Matches: 5<br><br>Offense: 1.26<br>Defense: 3.93<br><br><i>Click for Bey profile</i>", "<b>CrimsonGaruda</b><br>Rank: #23<br>ELO: 986<br>Winrate: 25.0%<br>Matches: 4<br><br>Offense: 1.88<br>Defense: 3.66<br><br><i>Click for Bey profile</i>", "<b>WhaleFlame</b><br>Rank: #24<br>ELO: 983<br>Winrate: 33.3%<br>Matches: 3<br><br>Offense: 1.07<br>Defense: 3.29<br><br><i>Click for Bey profile</i>", "<b>LeonCrest</b><br>Rank: #25<br>ELO: 982<br>Winrate: 25.0%<br>Matches: 4<br><br>Offense: 1.38<br>Defense: 3.53<br><br><i>Click for Bey profile</i>", "<b>WizardRod</b><br>Rank: #26<br>ELO: 981<br>Winrate: 42.9%<br>Matches: 7<br><br>Offense: 0.79<br>Defense: 3.25<br><br><i>Click for Bey profile</i>", "<b>BlackShell</b><br>Rank: #27<br>ELO: 980<br>Winrate: 40.0%<br>Matches: 5<br><br>Offense: 1.25<br>Defense: 3.77<br><br><i>Click for Bey profile</i>", "<b>WizardArc</b><br>Rank: #28<br>ELO: 979<br>Winrate: 25.0%<br>Matches: 4<br><br>Offense: 1.32<br>Defense: 4.07<br><br><i>Click for Bey profile</i>", "<b>TyrannoBeat</b><br>Rank: #29<br>ELO: 965<br>Winrate: 20.0%<br>Matches: 5<br><br>Offense: 1.35<br>Defense: 3.28<br><br><i>Click for Bey profile</i>", "<b>HellsReaper</b><br>Rank: #30<br>ELO: 965<br>Winrate: 0.0%<br>Matches: 4<br><br>Offense: 0.75<br>Defense: 4.14<br><br><i>Click for Bey profile</i>", "<b>WhaleWave</b><br>Rank: #31<br>ELO: 963<br>Winrate: 40.0%<br>Matches: 5<br><br>Offense: 1.65<br>Defense: 3.64<br><br><i>Click for Bey profile</i>", "<b>DranBrave</b><br>Rank: #32<br>ELO: 962<br>Winrate: 20.0%<br>Matches: 5<br><br>Offense: 1.55<br>Defense: 3.93<br><br><i>Click for Bey profile</i>", "<b>WizardArrow</b><br>Rank: #33<br>ELO: 961<br>Winrate: 0.0%<br>Matches: 4<br><br>Offense: 0.96<br>Defense: 3.62<br><br><i>Click for Bey profile</i>", "<b>PegasusBlast</b><br>Rank: #34<br>ELO: 957<br>Winrate: 0.0%<br>Matches: 3<br><br>Offense: 1.75<br>Defense: 3.86<br><br><i>Click for Bey profile</i>", "<b>HellsHammer</b><br>Rank: #35<br>ELO: 954<br>Winrate: 0.0%<br>Matches: 4<br><br>Offense: 0.50<br>Defense: 3.64<br><br><i>Click for Bey profile</i>", "<b>SamuraiSaber</b><br>Rank: #36<br>ELO: 943<br>Winrate: 0.0%<br>Matches: 4<br><br>Offense: 1.37<br>Defense: 2.94<br><br><i>Click for Bey profile</i>"];

        // Light mode layout
        const lightLayout = {
            title: {
                text: 'Meta Landscape: Offense vs Defense Map',
                font: { size: 18, color: '#1a1a1a' }
            },
            xaxis: {
                title: 'Offense Score ‚Üí',
                range: [-0.2, 5.2],
                gridcolor: 'rgba(128,128,128,0.2)',
                color: '#1a1a1a'
            },
            yaxis: {
                title: 'Defense Score ‚Üí',
                range: [-0.2, 5.2],
                gridcolor: 'rgba(128,128,128,0.2)',
                color: '#1a1a1a'
            },
            paper_bgcolor: '#ffffff',
            plot_bgcolor: '#ffffff',
            hovermode: 'closest',
            width: 1000,
            height: 800,
            shapes: [
                { type: 'line', x0: -0.2, x1: 5.2, y0: 2.5, y1: 2.5, line: { dash: 'dash', color: 'gray', width: 1 }, opacity: 0.4 },
                { type: 'line', x0: 2.5, x1: 2.5, y0: -0.2, y1: 5.2, line: { dash: 'dash', color: 'gray', width: 1 }, opacity: 0.4 }
            ],
            annotations: [
                { x: 4.5, y: 4.5, text: 'Balanced<br>(High Off/Def)', showarrow: false, font: { size: 10, color: 'rgba(0,0,0,0.3)' } },
                { x: 0.5, y: 4.5, text: 'Defensive<br>Specialist', showarrow: false, font: { size: 10, color: 'rgba(0,0,0,0.3)' } },
                { x: 4.5, y: 0.5, text: 'Offensive<br>Specialist', showarrow: false, font: { size: 10, color: 'rgba(0,0,0,0.3)' } },
                { x: 0.5, y: 0.5, text: 'Low Impact', showarrow: false, font: { size: 10, color: 'rgba(0,0,0,0.3)' } }
            ]
        };

        // Dark mode layout
        const darkLayout = {
            title: {
                text: 'Meta Landscape: Offense vs Defense Map',
                font: { size: 18, color: '#f1f5f9' }
            },
            xaxis: {
                title: 'Offense Score ‚Üí',
                range: [-0.2, 5.2],
                gridcolor: 'rgba(128,128,128,0.2)',
                color: '#f1f5f9'
            },
            yaxis: {
                title: 'Defense Score ‚Üí',
                range: [-0.2, 5.2],
                gridcolor: 'rgba(128,128,128,0.2)',
                color: '#f1f5f9'
            },
            paper_bgcolor: '#0f172a',
            plot_bgcolor: '#1e293b',
            hovermode: 'closest',
            width: 1000,
            height: 800,
            shapes: [
                { type: 'line', x0: -0.2, x1: 5.2, y0: 2.5, y1: 2.5, line: { dash: 'dash', color: 'gray', width: 1 }, opacity: 0.4 },
                { type: 'line', x0: 2.5, x1: 2.5, y0: -0.2, y1: 5.2, line: { dash: 'dash', color: 'gray', width: 1 }, opacity: 0.4 }
            ],
            annotations: [
                { x: 4.5, y: 4.5, text: 'Balanced<br>(High Off/Def)', showarrow: false, font: { size: 10, color: 'rgba(255,255,255,0.4)' } },
                { x: 0.5, y: 4.5, text: 'Defensive<br>Specialist', showarrow: false, font: { size: 10, color: 'rgba(255,255,255,0.4)' } },
                { x: 4.5, y: 0.5, text: 'Offensive<br>Specialist', showarrow: false, font: { size: 10, color: 'rgba(255,255,255,0.4)' } },
                { x: 0.5, y: 0.5, text: 'Low Impact', showarrow: false, font: { size: 10, color: 'rgba(255,255,255,0.4)' } }
            ]
        };

        // Create trace function with theme-specific colors
        function createTrace(isDark) {
            return {
                x: xData,
                y: yData,
                mode: 'markers+text',
                type: 'scatter',
                text: textData,
                textposition: 'top center',
                textfont: { size: 9, color: isDark ? '#f1f5f9' : '#1a1a1a' },
                marker: {
                    size: markerSizes,
                    color: eloData,
                    colorscale: 'RdYlGn',
                    colorbar: {
                        title: { text: 'ELO', font: { color: isDark ? '#f1f5f9' : '#1a1a1a' } },
                        thickness: 15,
                        len: 0.7,
                        tickfont: { color: isDark ? '#f1f5f9' : '#1a1a1a' }
                    },
                    showscale: true,
                    line: { width: 1, color: isDark ? '#ffffff' : '#000000' }
                },
                hovertext: hoverText,
                hoverinfo: 'text'
            };
        }

        // Config
        const config = {
            displayModeBar: true,
            modeBarButtonsToAdd: ['pan2d', 'zoomIn2d', 'zoomOut2d', 'resetScale2d'],
            responsive: true
        };

        // Initialize plot
        let isDarkMode = localStorage.getItem('theme') === 'dark';
        const toggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const themeLabel = document.getElementById('themeLabel');

        function updateTheme(isDark) {
            document.body.className = isDark ? 'dark' : 'light';
            themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            themeLabel.textContent = isDark ? 'Light Mode' : 'Dark Mode';
            toggle.checked = isDark;

            const layout = isDark ? darkLayout : lightLayout;
            const trace = createTrace(isDark);

            Plotly.react('plotDiv', [trace], layout, config);
        }

        // Set initial state
        updateTheme(isDarkMode);

        // Handle toggle change
        toggle.addEventListener('change', function() {
            isDarkMode = this.checked;
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            updateTheme(isDarkMode);
        });

        // Listen for theme changes from other pages
        window.addEventListener('storage', function(e) {
            if (e.key === 'theme') {
                isDarkMode = e.newValue === 'dark';
                updateTheme(isDarkMode);
            }
        });
    </script>
</body>
</html>