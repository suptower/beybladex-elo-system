<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beyblade Wiki</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="darkmode.js"></script>
</head>
<body>

<header>
    <h1>Beyblade Wiki</h1>
    <nav>
        <button class="hamburger" id="hamburger" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="nav-menu" id="navMenu">
            <a href="index.html">Start</a>
            <a href="wiki.html">Wiki</a>
            <a href="plots.html">Plots</a>
            <a href="leaderboard.html">Leaderboard</a>
            <button id="darkToggle">ðŸŒ™</button>
        </div>
    </nav>
</header>

<main>
    <h2>Beyblade Encyclopedia</h2>
    
    <div class="wiki-controls">
        <div class="search-container">
            <input type="text" id="wikiSearch" placeholder="Search beyblades...">
        </div>
        
        <div class="filter-container">
            <button class="filter-btn active" data-type="all">All</button>
            <button class="filter-btn" data-type="Attack">Attack</button>
            <button class="filter-btn" data-type="Defense">Defense</button>
            <button class="filter-btn" data-type="Stamina">Stamina</button>
            <button class="filter-btn" data-type="Balance">Balance</button>
        </div>
    </div>

    <div id="beyCount" class="bey-count"></div>

    <div id="wikiGrid" class="wiki-grid">
        <!-- Beyblade cards will be dynamically loaded here -->
    </div>
</main>

<footer>
    <p>Â© 2025 suptower</p>
</footer>

<script>
let beysData = [];
let filteredBeys = [];

// Load beyblade data
fetch('data/beys_data.json')
    .then(response => response.json())
    .then(data => {
        beysData = data;
        filteredBeys = [...beysData];
        renderBeys();
        updateCount();
    })
    .catch(error => {
        console.error('Error loading beyblade data:', error);
        document.getElementById('wikiGrid').innerHTML = 
            '<p style="text-align: center; color: var(--text-light);">Failed to load beyblade data.</p>';
    });

// Render beyblade cards
function renderBeys() {
    const grid = document.getElementById('wikiGrid');
    
    if (filteredBeys.length === 0) {
        grid.innerHTML = '<p style="text-align: center; color: var(--text-light); grid-column: 1 / -1;">No beyblades found.</p>';
        return;
    }
    
    grid.innerHTML = filteredBeys.map(bey => `
        <div class="wiki-card" data-type="${bey.type}">
            <div class="wiki-card-image">
                <img src="${bey.image}" alt="${bey.name}" loading="lazy">
                <div class="wiki-card-type ${bey.type.toLowerCase()}">${bey.type}</div>
            </div>
            <div class="wiki-card-content">
                <h3 class="wiki-card-title">${bey.name}</h3>
                <p class="wiki-card-description">${bey.description}</p>
                <div class="wiki-card-parts">
                    <div class="part-item">
                        <span class="part-label">Blade:</span>
                        <span class="part-value">${bey.blade}</span>
                    </div>
                    <div class="part-item">
                        <span class="part-label">Ratchet:</span>
                        <span class="part-value">${bey.ratchet}</span>
                    </div>
                    <div class="part-item">
                        <span class="part-label">Bit:</span>
                        <span class="part-value">${bey.bit}</span>
                    </div>
                </div>
            </div>
        </div>
    `).join('');
}

// Update count display
function updateCount() {
    const countEl = document.getElementById('beyCount');
    countEl.textContent = `Showing ${filteredBeys.length} of ${beysData.length} beyblades`;
}

// Search functionality
document.getElementById('wikiSearch').addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const activeFilter = document.querySelector('.filter-btn.active').dataset.type;
    
    filteredBeys = beysData.filter(bey => {
        const matchesSearch = bey.name.toLowerCase().includes(searchTerm) ||
                            bey.blade.toLowerCase().includes(searchTerm) ||
                            bey.description.toLowerCase().includes(searchTerm);
        const matchesFilter = activeFilter === 'all' || bey.type === activeFilter;
        return matchesSearch && matchesFilter;
    });
    
    renderBeys();
    updateCount();
});

// Filter functionality
document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        // Update active state
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        const filterType = btn.dataset.type;
        const searchTerm = document.getElementById('wikiSearch').value.toLowerCase();
        
        filteredBeys = beysData.filter(bey => {
            const matchesSearch = bey.name.toLowerCase().includes(searchTerm) ||
                                bey.blade.toLowerCase().includes(searchTerm) ||
                                bey.description.toLowerCase().includes(searchTerm);
            const matchesFilter = filterType === 'all' || bey.type === filterType;
            return matchesSearch && matchesFilter;
        });
        
        renderBeys();
        updateCount();
    });
});

// Hamburger menu functionality
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('navMenu');

hamburger.addEventListener('click', () => {
    hamburger.classList.toggle('active');
    navMenu.classList.toggle('active');
});

// Close menu when clicking outside
document.addEventListener('click', (e) => {
    if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
        hamburger.classList.remove('active');
        navMenu.classList.remove('active');
    }
});

// Close menu when clicking a link
navMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        navMenu.classList.remove('active');
    });
});
</script>

</body>
</html>
